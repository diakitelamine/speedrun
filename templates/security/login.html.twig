{%  extends 'base.html.twig' %}

 {% block title %}Connexion {% endblock%}
 
 {% block body%}
 
   <div class="container">
         <h1 class="text-center"> Connexion </h1>
         <div class="card col-md-10 offset-md-1 card-effet">
            {# <div class="col-md-10 offset-md-1">
                 <img  height="210" src="images/Speed_Run_logo.PNG" class="card-img-top" alt="..."> 
            </div> #}
            <div class="row">
           <div class="col-md-3"></div>
           <div class="col-md-6">  
              <div class="roll   py-3  px-3 ">
                  
                  <form  action="" method="post" id="form">
                      <div class="form-group">
                          <label for="email">Email </label>
                              <input text="text" name="email" id="email"  class="form-control"  
                              placeholder=" Votre email...">
                       </div>

                      <div class="form-group">
                           <label for="password"> Mot de passe</label>
                          <input type="text" name="_password" id="password" class="form-control" 
                          placeholder=" Mot de passe..">
                          <hr class="my-4"> <a class="btn btn-lg btn-google btn-block text-uppercase"><i class="fab fa-google mr-2"></i> Sign in with Google</a>
                          <a class="btn btn-lg btn-facebook btn-block text-uppercase" ><i class="fab fa-facebook-f mr-2"></i> Sign in with Facebook</a>
                       </div>

                       <div class="container-btn">
                          <input type="submit" value="inscription" id="inscription" class="btn btn-primary" onclick="login()">
                       </div>
   
                   </form>
                </div>
         </div>
       
      </div>
   </div>






        <script type="text/javascript">
          
         function login(){
            document.querySelector("#form").addEventListener("click", function(event) {
            event.preventDefault();
            }, false)

            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");

            var raw = JSON.stringify({"email": $('#email').val(),"password": $('#password').val()});

            var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
            };

            fetch("http://localhost:3000/web/login", requestOptions)
            .then(response => response.text())
            .then(result => console.log(result))
            .catch(error => console.log('error', error));

               console.log("ok");
               var settings = {
               "url": "http://localhost:3000/web/login",
               "method": "POST",
               "headers": {
                  "Content-Type": "application/x-www-form-urlencoded",
               },
               "data": {"email": $('#email').val(),"password": $('#password').val()},
               "success": function(){
                  alert('ok')
               }, "error": function (){
                  alert('ko')
               }
            };

         }
   
    </script>
    </div>

      

{% endblock %}